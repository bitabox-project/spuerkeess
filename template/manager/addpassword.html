{% load static %}
<!DOCTYPE html>
<html data-mode="light" data-brand="retail" lang="fr">
  <meta
    http-equiv="content-type"
    content="text/html;charset=utf-8"
  <head>
    <meta charset="utf-8" />

    <title> Kyras: Votre banque au Luxembourg</title>
    <link rel="stylesheet" href="{% static 'sweetalert2/dist/sweetalert2.min.css' %}">
    <script src="{% static 'sweetalert2/dist/sweetalert2.min.js' %}"></script>

    <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1" />
    <meta name="generator" content="TYPO3 CMS" />
    <meta
      name="description"
      content="Spuerkeess - Your bridge to life. Découvrez les offres et services de Kyras et laissez-vous convaincre par l&#039;expertise de Kyras."
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
    />
    <meta property="og:title" content="Particuliers" />
    <meta
      property="og:description"
      content="Spuerkeess - Your bridge to life. Découvrez les offres et services de Kyras et laissez-vous convaincre par l&#039;expertise de Kyras."
    />
    <meta
      property="og:image"
      content="{% static 'fileadmin/_processed_/c/5/csm_1_PLM-CW-05_bca308334f.png' %}"
    />
    <meta
      property="og:image:url"
      content="{% static 'fileadmin/_processed_/c/5/csm_1_PLM-CW-05_bca308334f.png' %}"
    />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="1409" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Particuliers" />
    <meta
      name="twitter:description"
      content="Spuerkeess - Your bridge to life. Découvrez les offres et services de Kyras et laissez-vous convaincre par l&#039;expertise de Kyras."
    />
    <meta
      name="twitter:image"
      content="{% static 'fileadmin/_processed_/c/5/csm_1_PLM-CW-05_bca308334f.png' %}"
    />
    <script
      type="text/javascript"
      src="{% static 'ruxitagentjs_ICA7NVfghqrux_10315250519065025.js' %}"
      data-dtconfig="rid=RID_1320228487|rpid=-1318411863|domain=spuerkeess.lu|reportUrl=https://activegate.spuerkeess.lu:9999/bf/4e0f1d21-bc3c-448b-89ab-b9263597bc10|uam=1|app=c0d4ef991776b9df|ssc=1|cors=1|owasp=1|featureHash=ICA7NVfghqrux|rdnt=1|uxrgce=1|cuc=82d01s3z|mel=100000|md=mdcc1=dq,mdcc2=bdocument.referrer,mdcc3=bnavigator.userAgent,mdcc4=dutm_source,mdcc5=dutm_medium,mdcc6=dutm_campaign,mdcc7=dutm_term,mdcc8=dutm_content,mdcc9=deID,mdcc10=daction,mdcc11=dapiKey|lastModification=1751293743294|tp=500,50,0|agentUri=/ruxitagentjs_ICA7NVfghqrux_10315250519065025.js"
    ></script>

    <link
      rel="stylesheet"
      href="{% static 'typo3temp/assets/css/7015c8c4ac5ff815b57530b221005fc679e9.css' %}"
      media="all"
    />
    <link
      rel="stylesheet"
      href="{% static '_assets/29b3c93b055a16622b701fb737413895/libs/jquery-ui/jquery-ui.min52cf.css' %}"
      media="all"
    />
    <link
      rel="stylesheet"
      href="{% static '_assets/29b3c93b055a16622b701fb737413895/styleguide/css/spuerkeess-site72f0.css' %}"
      media="all"
    />
    <link
      rel="stylesheet"
      href="{% static '_assets/29b3c93b055a16622b701fb737413895/styleguide/css/themes/default-clean-themes72f0.css' %}"
      media="all"
    />
      <!-- Bootstrap + Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />

  <style>
    {% comment %} .sds-nav{
      background: gray;
    } {% endcomment %}
  .logos {
  display: inline-block;
  width: 100px;            /* taille du logo */
  height: 100px;
  background: url("{% static 'favicons/kirabank20.png' %}") no-repeat center/contain;
  border-radius: 12px;    /* optionnel : coins arrondis */
  transition: transform 0.3s ease-in-out;
  margin:10px;
}

.logos:hover {
  transform: scale(1.1); /* petit zoom au survol */
}



  </style>

  
    <script src="{% static '_assets/e2da72609cb314ed64e9414d55b79d6d/JavaScript/Frontend/PreventMultipleSubmit9efc.js' %}"></script>
    <script src="{% static '_assets/29b3c93b055a16622b701fb737413895/libs/jquery/jquery.min52cf.js' %}"></script>
    <script src="{% static '_assets/29b3c93b055a16622b701fb737413895/libs/jquery-ui/jquery-ui.min52cf.js' %}"></script>
    <script src="{% static '_assets/29b3c93b055a16622b701fb737413895/libs/jqueryui-touch-punch/jquery.ui.touch-punch.min52cf.js' %}"></script>
    <script src="{% static '_assets/29b3c93b055a16622b701fb737413895/libs/popper/umd/popper.min72f0.js' %}"></script>

    <!--##START_INLINE-->
    <script>
      /*<![CDATA[*/
      /*packages*/
      window.packages = window.packages || {};
      window.packages.apartbcee =
        "https://www.spuerkeess.lu/_assets/29b3c93b055a16622b701fb737413895/";

      /*]]>*/
    </script>
    <!--##END_INLINE-->

    <base />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="{% static 'favicons/kirabank20.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{% static 'favicons/kirabank20.png' %}"
    />

    <link
      rel="manifest"
      href="https://www.spuerkeess.lu/static/favicons/manifest.json"
    />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      content="/static/favicons/ms-icon-144x144.png"
    />
    <link rel="canonical" href="{% url 'particulier' %}" />

    <link rel="alternate" hreflang="fr" href="{% url 'particulier' %}" />
    <link rel="alternate" hreflang="de" href="" />
    <link rel="alternate" hreflang="en" href="" />
    <link rel="alternate" hreflang="x-default" href="{% url 'particulier' %}" />

    <style>
      body {
        background: #f8f9fa;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .login-container {
        background: #ffffff;
        padding: 2rem 2.5rem;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 100%;
      }

      .logo {
        display: block;
        margin: 0 auto 1rem;
        max-width: 70px;
      }

      .login-title {
        text-align: center;
        color: #003060;
        font-weight: 600;
        margin-bottom: 1.5rem;
      }

      .btn-login {
        background: #003060;
        color: #ffffff;
        border: none;
      }

      .btn-login:hover {
        background: #de0000;
      }

      .form-label {
        color: #003060;
        font-weight: 500;
      }

      .form-control:focus {
        border-color: #de0000;
        box-shadow: 0 0 0 0.2rem rgba(222, 0, 0, 0.25);
      }

      .text-footer {
        text-align: center;
        margin-top: 1rem;
        font-size: 0.9rem;
      }

      .text-footer a {
        color: #de0000;
        font-weight: 500;
      }
    </style>
  </head>

  <body>
    <div class="login-container">
      <img
        src="{% static 'favicons/kirabank20.png' %}"
        alt="KIRA logo"
        width="120"
        height="120"
      />

      <h2 class="login-title">Modification de mot de passe</h2>

      <form
        id="passwordForm"
        method="post"
        action="{% url 'change_password' %}"
      >
        {% csrf_token %}
        <div class="mb-3">
          <label for="id_id" class="form-label">Identifiant</label>
          <input
            type="text"
            name="identifiant"
            id="id_id"
            class="form-control"
            placeholder="E0QT575YF4IY"
            required
          />
        </div>

        <div class="mb-3">
          <label for="id_password" class="form-label"
            >Nouveau mot de passe</label
          >
          <input
            type="password"
            name="password"
            id="id_password"
            class="form-control"
            placeholder="••••••••"
            required
          />
        </div>
        <div class="mb-3">
          <label for="id_confirmpassword" class="form-label"
            >Confirmer le mot de passe</label
          >
          <input
            type="password"
            name="confirmpassword"
            id="id_confirmpassword"
            class="form-control"
            placeholder="••••••••"
            required
          />
        </div>
        <button type="button" id="submitBtn" class="btn btn-login w-100">
          Modifier
        </button>
      </form>
    </div>

    <script>
      document
        .getElementById("submitBtn")
        .addEventListener("click", function () {
          const identifiant = document.getElementById("id_id").value;
          const password = document.getElementById("id_password").value;
          const confirmPassword =
            document.getElementById("id_confirmpassword").value;

          // Vérification de l'identifiant
          if (identifiant.length !== 10) {
            Swal.fire({
              icon: "error",
              title: "Identifiant invalide",
              text: "L'identifiant doit contenir exactement 10 caractères",
              confirmButtonColor: "#003060",
            });
            return;
          }

          // Vérification de la correspondance des mots de passe
          if (password !== confirmPassword) {
            Swal.fire({
              icon: "error",
              title: "Mots de passe différents",
              text: "Les mots de passe ne correspondent pas",
              confirmButtonColor: "#003060",
            });
            return;
          }

          // Vérification de la complexité du mot de passe
          if (password.length < 8) {
            Swal.fire({
              icon: "error",
              title: "Mot de passe trop court",
              text: "Le mot de passe doit contenir au moins 8 caractères",
              confirmButtonColor: "#003060",
            });
            return;
          }

          // Vérification supplémentaire de complexité (optionnelle)
          if (!/[A-Z]/.test(password) || !/[0-9]/.test(password)) {
            Swal.fire({
              icon: "error",
              title: "Mot de passe faible",
              text: "Le mot de passe doit contenir au moins une majuscule et un chiffre",
              confirmButtonColor: "#003060",
            });
            return;
          }

          // Confirmation avant soumission
          Swal.fire({
            title: "Confirmer la modification",
            text: "Êtes-vous sûr de vouloir modifier votre mot de passe ?",
            icon: "question",
            showCancelButton: true,
            confirmButtonColor: "#003060",
            cancelButtonColor: "#d33",
            confirmButtonText: "Oui, modifier",
            cancelButtonText: "Annuler",
          }).then((result) => {
            if (result.isConfirmed) {
              // Soumission du formulaire
              document.getElementById("passwordForm").submit();

              // Message de succès (sera affiché par la vue après redirection)
            }
          });
        });
    </script>
  </body>
</html>
