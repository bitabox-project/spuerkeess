(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function a(e){var a=function(e,a){if("object"!=t(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,a||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==t(a)?a:a+""}function s(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function n(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}const o={AJAX_FORM_REQUESTED:"ajax.form.requested",AJAX_FORM_SUBMIT:"ajax.form.submit",AJAX_FORM_RESPONDED:"ajax.form.responded",AJAX_FORM_NEO_REQUESTED:"ajax.form.neo.requested",AJAX_FORM_NEO_SUBMIT:"ajax.form.neo.submit",AJAX_FORM_NEO_RESPONDED:"ajax.form.neo.responded",AJAX_STEP_FORM_SUBMIT:"ajax.step.form.submit",AJAX_STEP_FORM_SUBMIT_RESULT:"ajax.step.form.submit.result",AJAX_STEP_FORM_NEXT:"ajax.step.form.next",AJAX_STEP_FORM_BACK:"ajax.step.form.back",AJAX_STEP_FORM_INIT:"ajax.step.form.init",AJAX_STEP_FORM_STEP_CHECKED:"ajax.step.form.step.checked",AJAX_STEP_FORM_STEP_ACTIVE:"ajax.step.form.step.active",AJAX_STEP_FORM_SUMMARY_VALUES:"ajax.step.form.summary.values",AJAX_STEP_FORM_NAVIGATION:"ajax.step.form.navigation",AJAX_STEP_FORM_DYNAMIC_DATA:"ajax.step.form.dynamic.data",AJAX_STEP_FORM_TRIGGER_MODAL:"ajax.step.form.trigger.modal",AJAX_STEP_FORM_DISABLED_BTN:"ajax.step.form.disabled.btn",AJAX_STEP_FORM_FIELD_VALIDATION:"ajax.step.form.field.validation",AJAX_STEP_FORM_RESET_INPUT_VALUE:"ajax.step.form.reset.input.value",AJAX_STEP_FORM_HIDE_INPUT:"ajax.step.form.hide.input",AJAX_STEP_FORM_SHOW_INPUT:"ajax.step.form.show.input",AJAX_STEP_FORM_BACK_POSITION_UPDATED:"ajax.step.form.back.position.updated",AJAX_STEP_FORM_NEXT_POSITION_UPDATED:"ajax.step.form.next.position.updated",AJAX_STEP_FORM_APPOINTMENT_SEARCH_AGENCY:"ajax.appointment.search.agency",FORM_ELEMENT_CHANGED:"form.element.changed",FORM_ELEMENT_INTERACTED:"form.element.interacted",FORM_ERROR:"form.error",FORM_SLIDER_REBUILT:"form.slider.rebuild",FORM_SLIDER_SET_VALUE:"form.slider.set.value",FORM_SLIDER_SET_INDEX:"form.slider.set.index",FORM_INPUT_REBUILT:"form.input.rebuild",FORM_SELECT_REBUILT:"form.select.rebuild",FORM_COLOR_CHANGED:"form.color.changed",FORM_COLOR_REBUILD:"form.color.rebuild",CAPTCHA_REFRESH:"captcha.refresh",SEARCH_OVERLAY_SHOW:"search.overlay.show",WINDOW_RESIZE:"window.resize",WINDOW_LOADED:"window.loaded",SWIPER_UPDATE:"swiper.update",MAP_LOADED:"map.loaded",ANALYTICS:"analytics",INPUT_AMOUNT_REMOVED:"input.amount.removed"};var r=function(){function t(){e(this,t)}return n(t,null,[{key:"formatAmount",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=Number(e)+"";a&&(o=(o>0?"+":"")+o);var r=(o=o.replace(/\./g,",")).toString().split(",");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),!0===s&&(r[1]=t.padEnd(void 0===r[1]?"":r[1],n,"0")),r.join(",")}},{key:"formattedAmountToFloat",value:function(e){return parseFloat(String(e).replace(/,00$/,"").replace("+","").replace(/\./g,"").replace(/\,/g,"."))}},{key:"cleanFormattedAmount",value:function(e){return String(e).replace(/,00$/,"").replace("+","").replace(/\./g,"")}},{key:"roundDecimal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}},{key:"getMonthlyFee",value:function(e,t,a){var s=Number(e),n=Number(t),o=Number(a);if(0==n)return Math.round(s/(12*o)*100)/100;var r=1+365*n/400/360,l=Math.pow(Math.pow(r,4),1/12),i=s*((l-1)/(1-Math.pow(l,12*-o)));return Math.round(100*i)/100}},{key:"ellipsis",value:function(e,t){e=e.substr(0,Math.max(0,t))}},{key:"padEnd",value:function(e,t,a){if(String.prototype.padEnd)return e.padEnd(t,a);if((t=Math.floor(t)||0)<e.length)return String(e);a=a?String(a):" ";for(var s="",n=t-e.length,o=0;s.length<n;)a[o]||(o=0),s+=a[o],o++;return String(e).slice(0)+s}},{key:"humanReadableFileSize",value:function(e){var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),s=e/Math.pow(1024,a);return 0===a?"".concat(e," bytes"):"".concat(s.toFixed(2)," ").concat(t[a])}}])}();const l=function(e,t){var a=document.createElement(e),s=arguments.length>2?arguments[2]:"";return Array.isArray(s)?s.forEach(function(e){e.nodeType||(e=document.createTextNode(e)),a.appendChild(e)}):s instanceof Element||s instanceof HTMLDocument?a.appendChild(s):a.innerHTML=s,Object.keys(t).forEach(function(e){a.setAttribute(e,t[e])}),a};var i=function(){return n(function t(){e(this,t),this.module=document.querySelector("[data-precious-metal-grid]"),this.pageIndex=this.module.querySelector('[name="precious-metal-list-page"]'),this.sorts=this.module.querySelectorAll("[data-precious-metal-sort]"),this.sortby=this.module.querySelector("[data-precious-metal-sortby]"),this.form=this.module.querySelector('form[data-key="precious.metal.filter"]'),this.content=this.module.querySelector("[data-precious-metal-content]"),this.list=this.content.querySelector("[data-precious-metal-list]"),this.loader=this.content.querySelector("[data-precious-metal-loader]"),this.isLoading=!1,this.endLoading=!1,this.attachLoadMore(),this.attachEvents()},[{key:"attachLoadMore",value:function(){var e=this;new IntersectionObserver(function(t,a){!0!==t[0].isIntersecting||e.isLoading||e.endLoading||(e.isLoading=!0,Forms.submitForm(e.form))},{threshold:1}).observe(this.loader)}},{key:"attachEvents",value:function(){var e=this;this.sorts.forEach(function(e){return e.addEventListener("change",function(){Events.fire(o.FORM_ELEMENT_CHANGED,{key:"precious.metal.filter",name:e.name,value:e.value,formKey:"precious.metal.filter"})})}),Events.register(o.AJAX_FORM_REQUESTED,function(t){return"precious.metal.filter"===t.formKey&&(e.isLoading=!0),!0}),Events.register(o.AJAX_FORM_RESPONDED,function(t){return"precious.metal.filter"===t.formKey&&(e.isLoading=!1,t.response.data.pageEnd&&(e.endLoading=!0,e.hideLoader()),t.response.data.page>e.pageIndex.value&&(e.renderList(t.response.data),e.pageIndex.value=t.response.data.page)),!0}),Events.register(o.FORM_ELEMENT_CHANGED,function(t){if("precious.metal.filter"===t.formKey){var a=e.form.querySelector("[data-precious-metal-sort]:checked").parentNode.querySelector("label").innerHTML;e.sortby.textContent=a.trim(),e.showLoader(),e.isLoading=!0,e.pageIndex.value=0,e.endLoading=!1}return!0})}},{key:"renderList",value:function(e){for(var t=e.datasets,a=0;a<t.length;a++){var s=t[a],n=this.renderCard(s,e.translations,e.snetLink),o=new l("div",{class:"col-12 col-md-6 col-lg-4"},[]);o.append(n),this.list.append(o)}}},{key:"renderCard",value:function(e,t,a){var s,n,o=l("article",{class:"sds-preciousMetal sds-box -boxInsetLg sds-scaleInteraction"}),i=l("div",{class:"sds-stackXl"}),d=null;if(e.name&&(n=l("h3",{class:"h3"},e.name)),e.image)s=l("img",{class:"img-fluid",src:e.image,alt:e.title});else{var c=l("div",{class:"sds-noPic"});c.innerHTML='<svg width="630" height="630" viewBox="0 0 630 630" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect width="630" height="630" transform="translate(0 0.304688)" fill="#F0F6FF" /> <g opacity="0.32"> <path d="M411.436 305.117L411.452 305.133L411.469 305.147C417.042 309.792 418.919 317.228 416.113 324.713L416.109 324.721L416.106 324.73L402.693 364.97C402.693 364.972 402.692 364.973 402.692 364.975C398.007 378.081 382.145 382.703 371.893 372.451L361.351 361.91L360.497 361.056V362.263C360.497 371.603 353.023 380.93 341.831 380.93H231.622C217.602 380.93 208.295 365.98 214.813 353.875L214.816 353.868L214.82 353.862L233.986 315.528L233.993 315.515L233.999 315.502C236.782 309.007 243.287 305.263 250.789 305.263H303.497H304.705L303.851 304.41L293.309 293.868C284.005 284.563 287.695 267.752 301.739 263.071L341.978 249.658C348.516 247.794 355.988 249.669 360.644 254.325L411.436 305.117ZM231.175 362.04L230.813 362.763H231.622H341.831H342.64L342.278 362.04L323.111 323.706L322.973 323.43H322.664H250.789H250.48L250.342 323.706L231.175 362.04ZM384.602 359.742L385.179 360.318L385.431 359.543L398.848 318.335L398.943 318.043L398.726 317.826L347.934 267.035L347.717 266.818L347.426 266.913L306.218 280.329L305.442 280.582L306.019 281.158L384.602 359.742Z" fill="#4D6E90" stroke="#4D6E90" /> </g></svg>',s=l("div",{class:"sds-preciousMetal__img"},[l("div",{class:"sds-preciousMetal__noPic"},[c])])}return e.additional_info&&e.additional_info.length>0&&(d=new l("p",{},e.additional_info)),s?i.append(l("div",{class:"sds-stackLg"},[s,l("div",{class:"sds-stackXs"},[n,d])])):i.append(l("div",{class:"sds-stackLg"},[l("div",{class:"sds-stackXs"},[n,d])])),i.append(l("div",{class:"sds-box -boxInsetLg sds-box__outOfBoundsMd -boxSunken"},[l("table",{class:"sds-infoTable table -noBorder"},[l("tbody",{},[l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.bcee_bid)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("div",{class:"sds-amount -amountXl"},[l("span",{class:"sds-amount__value"},r.formatAmount(e.price_bcee_sell)),l("span",{class:"sds-sds-amount__currency"},"€")])])])]),l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.bcee_ask)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("div",{class:"sds-amount -amountXl"},[l("span",{class:"sds-amount__value"},r.formatAmount(e.price_bcee_buy)),l("span",{class:"sds-sds-amount__currency"},"€")])])])])])])])),i.append(l("table",{class:"sds-infoTable table -noBorder"},[l("tbody",{},[l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.form)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-textBodyLg"},e.form)])])]),l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.purity)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-textBodyLg"},e.purity)])])]),l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.weight_net)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-textBodyLg"},[r.formatAmount(e.weight_net)," g"])])])]),l("tr",{},[l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-label"},t.weight_brut)])]),l("td",{},[l("div",{class:"sds-infoTable__cellContent"},[l("label",{class:"sds-textBodyLg"},[r.formatAmount(e.weight_brut)," g"])])])])])])),0===e.deliverable&&i.append(l("label",{class:"sds-label",style:"color:#de0000;"},t.deliverable)),i.append(l("a",{class:"sds-preciousMetal__action",href:a+e.code_bcee,target:"_blank"},[l("dev",{class:"sds-preciousMetal__actionInner"},[l("span",{class:"sds-btn -btnCta -btnCtaSuccess position-static stretched-link"},[l("span",{class:"sds-btn__text"},t.buy_on_snet)])])])),o.append(i),o}},{key:"showLoader",value:function(){this.list.innerHTML="",this.loader.classList.remove("d-none")}},{key:"hideLoader",value:function(){this.loader.classList.add("d-none")}}])}();Events.register(o.WINDOW_LOADED,function(){return new i,!0})})();