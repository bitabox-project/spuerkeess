(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function a(e){var a=function(e,a){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,a||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==t(a)?a:a+""}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function o(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}const n={AJAX_FORM_REQUESTED:"ajax.form.requested",AJAX_FORM_SUBMIT:"ajax.form.submit",AJAX_FORM_RESPONDED:"ajax.form.responded",AJAX_FORM_NEO_REQUESTED:"ajax.form.neo.requested",AJAX_FORM_NEO_SUBMIT:"ajax.form.neo.submit",AJAX_FORM_NEO_RESPONDED:"ajax.form.neo.responded",AJAX_STEP_FORM_SUBMIT:"ajax.step.form.submit",AJAX_STEP_FORM_SUBMIT_RESULT:"ajax.step.form.submit.result",AJAX_STEP_FORM_NEXT:"ajax.step.form.next",AJAX_STEP_FORM_BACK:"ajax.step.form.back",AJAX_STEP_FORM_INIT:"ajax.step.form.init",AJAX_STEP_FORM_STEP_CHECKED:"ajax.step.form.step.checked",AJAX_STEP_FORM_STEP_ACTIVE:"ajax.step.form.step.active",AJAX_STEP_FORM_SUMMARY_VALUES:"ajax.step.form.summary.values",AJAX_STEP_FORM_NAVIGATION:"ajax.step.form.navigation",AJAX_STEP_FORM_DYNAMIC_DATA:"ajax.step.form.dynamic.data",AJAX_STEP_FORM_TRIGGER_MODAL:"ajax.step.form.trigger.modal",AJAX_STEP_FORM_DISABLED_BTN:"ajax.step.form.disabled.btn",AJAX_STEP_FORM_FIELD_VALIDATION:"ajax.step.form.field.validation",AJAX_STEP_FORM_RESET_INPUT_VALUE:"ajax.step.form.reset.input.value",AJAX_STEP_FORM_HIDE_INPUT:"ajax.step.form.hide.input",AJAX_STEP_FORM_SHOW_INPUT:"ajax.step.form.show.input",AJAX_STEP_FORM_BACK_POSITION_UPDATED:"ajax.step.form.back.position.updated",AJAX_STEP_FORM_NEXT_POSITION_UPDATED:"ajax.step.form.next.position.updated",AJAX_STEP_FORM_APPOINTMENT_SEARCH_AGENCY:"ajax.appointment.search.agency",FORM_ELEMENT_CHANGED:"form.element.changed",FORM_ELEMENT_INTERACTED:"form.element.interacted",FORM_ERROR:"form.error",FORM_SLIDER_REBUILT:"form.slider.rebuild",FORM_SLIDER_SET_VALUE:"form.slider.set.value",FORM_SLIDER_SET_INDEX:"form.slider.set.index",FORM_INPUT_REBUILT:"form.input.rebuild",FORM_SELECT_REBUILT:"form.select.rebuild",FORM_COLOR_CHANGED:"form.color.changed",FORM_COLOR_REBUILD:"form.color.rebuild",CAPTCHA_REFRESH:"captcha.refresh",SEARCH_OVERLAY_SHOW:"search.overlay.show",WINDOW_RESIZE:"window.resize",WINDOW_LOADED:"window.loaded",SWIPER_UPDATE:"swiper.update",MAP_LOADED:"map.loaded",ANALYTICS:"analytics",INPUT_AMOUNT_REMOVED:"input.amount.removed"};var s=function(){function t(){e(this,t)}return o(t,null,[{key:"formatAmount",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,n=Number(e)+"";a&&(n=(n>0?"+":"")+n);var s=(n=n.replace(/\./g,",")).toString().split(",");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),!0===r&&(s[1]=t.padEnd(void 0===s[1]?"":s[1],o,"0")),s.join(",")}},{key:"formattedAmountToFloat",value:function(e){return parseFloat(String(e).replace(/,00$/,"").replace("+","").replace(/\./g,"").replace(/\,/g,"."))}},{key:"cleanFormattedAmount",value:function(e){return String(e).replace(/,00$/,"").replace("+","").replace(/\./g,"")}},{key:"roundDecimal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}},{key:"getMonthlyFee",value:function(e,t,a){var r=Number(e),o=Number(t),n=Number(a);if(0==o)return Math.round(r/(12*n)*100)/100;var s=1+365*o/400/360,i=Math.pow(Math.pow(s,4),1/12),l=r*((i-1)/(1-Math.pow(i,12*-n)));return Math.round(100*l)/100}},{key:"ellipsis",value:function(e,t){e=e.substr(0,Math.max(0,t))}},{key:"padEnd",value:function(e,t,a){if(String.prototype.padEnd)return e.padEnd(t,a);if((t=Math.floor(t)||0)<e.length)return String(e);a=a?String(a):" ";for(var r="",o=t-e.length,n=0;r.length<o;)a[n]||(n=0),r+=a[n],n++;return String(e).slice(0)+r}},{key:"humanReadableFileSize",value:function(e){var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),r=e/Math.pow(1024,a);return 0===a?"".concat(e," bytes"):"".concat(r.toFixed(2)," ").concat(t[a])}}])}(),i=function(){return o(function t(){e(this,t),this.formKey="simulator.avantages",this.form=Forms.getFormInstanceForKey(this.formKey),this.table=document.querySelector(".js-simulator-avantages-table"),this.attachEvents()},[{key:"attachEvents",value:function(){var e=this;Events.register(n.FORM_ELEMENT_CHANGED,function(t){if(t.formKey===e.formKey){var a=e.form.getComponent("taxclass"),r=e.form.getComponent("bday"),o=e.form.getComponent("bdaypartner"),n=e.form.domElement.querySelector(".js-simulator-avantages-button"),s=e.form.domElement.querySelector(".js-simulator-avantages-children"),i=e.form.domElement.querySelector(".js-simulator-avantages-partner");if("taxclass"===t.name)switch(t.value){case"1":s.classList.add("d-none"),i.classList.add("d-none");break;case"1a":s.classList.remove("d-none"),i.classList.add("d-none");break;case"2":s.classList.remove("d-none"),i.classList.remove("d-none")}"2"!==a.getValue()&&r.getValue()||"2"===a.getValue()&&r.getValue()&&o.getValue()?n.classList.remove("-isDisabled"):n.classList.add("-isDisabled");var l=Forms.getFormElement(t.key,"isLiberalProfession");Forms.getFormElement(t.key,"income");if("isLiberalProfession"===t.name){document.querySelector(".js-simulator-avantage-income").classList.toggle("d-none"),document.querySelector(".js-simulator-avantage-pension").classList.toggle("d-none");var u=document.querySelector(".js-simulator-avantage-cols");!0===l.getValue()?(u.classList.remove("row-cols-xxl-3"),u.classList.add("row-cols-xxl-4")):(u.classList.remove("row-cols-xxl-4"),u.classList.add("row-cols-xxl-3"))}}return!0}),Events.register(n.AJAX_FORM_RESPONDED,function(t){if(t.formKey===e.formKey){var a=t.response.data||{},r=e.table.querySelector('[data-type="retirementPlan"] .sds-product__description'),o=e.table.querySelector('[data-type="housingSavings"] .sds-product__description'),n=e.table.querySelector('[data-type="insuranceAndInterests"] .sds-product__description');a.retirementPlanValue&&(r.innerHTML=String(r.dataset.value).replace("[calculation]","".concat(s.formatAmount(a.retirementPlanValue)," &euro; x"))),a.housingSavingsValue&&(o.innerHTML=String(o.dataset.value).replace("[calculation]","".concat(a.amountPeople," x ").concat(s.formatAmount(a.housingSavingsValue)," &euro;"))),a.insuranceAndInterestsValue&&(n.innerHTML=String(n.dataset.value).replace("[calculation]","".concat(a.amountPeople," x ").concat(s.formatAmount(a.insuranceAndInterestsValue)," &euro;"))),window.scrollTo({top:e.table.getBoundingClientRect().top,behaviour:"smooth"})}return!0})}}])}();Events.register(n.WINDOW_LOADED,function(){return new i,!0})})();