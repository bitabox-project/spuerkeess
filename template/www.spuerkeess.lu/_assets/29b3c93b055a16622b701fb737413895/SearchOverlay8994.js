(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function a(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}const s={AJAX_FORM_REQUESTED:"ajax.form.requested",AJAX_FORM_SUBMIT:"ajax.form.submit",AJAX_FORM_RESPONDED:"ajax.form.responded",AJAX_FORM_NEO_REQUESTED:"ajax.form.neo.requested",AJAX_FORM_NEO_SUBMIT:"ajax.form.neo.submit",AJAX_FORM_NEO_RESPONDED:"ajax.form.neo.responded",AJAX_STEP_FORM_SUBMIT:"ajax.step.form.submit",AJAX_STEP_FORM_SUBMIT_RESULT:"ajax.step.form.submit.result",AJAX_STEP_FORM_NEXT:"ajax.step.form.next",AJAX_STEP_FORM_BACK:"ajax.step.form.back",AJAX_STEP_FORM_INIT:"ajax.step.form.init",AJAX_STEP_FORM_STEP_CHECKED:"ajax.step.form.step.checked",AJAX_STEP_FORM_STEP_ACTIVE:"ajax.step.form.step.active",AJAX_STEP_FORM_SUMMARY_VALUES:"ajax.step.form.summary.values",AJAX_STEP_FORM_NAVIGATION:"ajax.step.form.navigation",AJAX_STEP_FORM_DYNAMIC_DATA:"ajax.step.form.dynamic.data",AJAX_STEP_FORM_TRIGGER_MODAL:"ajax.step.form.trigger.modal",AJAX_STEP_FORM_DISABLED_BTN:"ajax.step.form.disabled.btn",AJAX_STEP_FORM_FIELD_VALIDATION:"ajax.step.form.field.validation",AJAX_STEP_FORM_RESET_INPUT_VALUE:"ajax.step.form.reset.input.value",AJAX_STEP_FORM_HIDE_INPUT:"ajax.step.form.hide.input",AJAX_STEP_FORM_SHOW_INPUT:"ajax.step.form.show.input",AJAX_STEP_FORM_BACK_POSITION_UPDATED:"ajax.step.form.back.position.updated",AJAX_STEP_FORM_NEXT_POSITION_UPDATED:"ajax.step.form.next.position.updated",AJAX_STEP_FORM_APPOINTMENT_SEARCH_AGENCY:"ajax.appointment.search.agency",FORM_ELEMENT_CHANGED:"form.element.changed",FORM_ELEMENT_INTERACTED:"form.element.interacted",FORM_ERROR:"form.error",FORM_SLIDER_REBUILT:"form.slider.rebuild",FORM_SLIDER_SET_VALUE:"form.slider.set.value",FORM_SLIDER_SET_INDEX:"form.slider.set.index",FORM_INPUT_REBUILT:"form.input.rebuild",FORM_SELECT_REBUILT:"form.select.rebuild",FORM_COLOR_CHANGED:"form.color.changed",FORM_COLOR_REBUILD:"form.color.rebuild",CAPTCHA_REFRESH:"captcha.refresh",SEARCH_OVERLAY_SHOW:"search.overlay.show",WINDOW_RESIZE:"window.resize",WINDOW_LOADED:"window.loaded",SWIPER_UPDATE:"swiper.update",MAP_LOADED:"map.loaded",ANALYTICS:"analytics",INPUT_AMOUNT_REMOVED:"input.amount.removed"},r={PAGE:"page",GUIDE:"guide",INFO:"info",DOCUMENT:"document",SUGGESTION:"suggestion",SERVICE_POINT:"service_point",EXTERNAL_LINK:"link",EVENT:"event",BLOG:"blog"},o={MIXPANEL:"mp",GOOGLE_ANALYTICS:"ga",FACEBOOK:"fb",FACEBOOK_SDK:"fbsdk",PIWIK_PRO:"piwik"};const l=function(e,t){var n=document.createElement(e),a=arguments.length>2?arguments[2]:"";return Array.isArray(a)?a.forEach(function(e){e.nodeType||(e=document.createTextNode(e)),n.appendChild(e)}):a instanceof Element||a instanceof HTMLDocument?n.appendChild(a):n.innerHTML=a,Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n};var c=function(){return i(function t(n,a,i,s){e(this,t),this.protocol=String(n).replace(":",""),this.host=a,this.pathname=i,this.search=s,this.params=this.parseArguments()},[{key:"parseArguments",value:function(){if("string"!=typeof this.search||0==this.search.length)return{};for(var e,t,n,a=this.search.substring(1).split("&"),i=a.length,s={},r=0;r<i;r++)e=a[r].split("="),0!=(t=decodeURIComponent(e[0])).length&&(n=decodeURIComponent(e[1]),void 0===s[t]?s[t]=n:s[t]instanceof Array?s[t].push(n):s[t]=[s[t],n]);return s}},{key:"removeParam",value:function(e){this.params.hasOwnProperty(e)&&delete this.params[e]}},{key:"addParam",value:function(e,t){this.params[e]=t}},{key:"getParam",value:function(e){return this.params[e]}},{key:"getCleanURL",value:function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.protocol+"://"+this.host:"")+this.pathname}},{key:"getFullURL",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.getCleanURL(e)+this.getParamString()}},{key:"getParamString",value:function(e){var t=$.param(this.params),n=e?"&":"?";return t.length>0?n+t:""}},{key:"hasIndex",value:function(){return this.pathname.indexOf("index.php")>-1}},{key:"hasPageId",value:function(){return void 0!==this.params.id}},{key:"hasLanguage",value:function(){return void 0!==this.params.L}},{key:"getLanguage",value:function(){return this.params.L}},{key:"isRealURL",value:function(){return!this.hasIndex()||!this.hasPageId()}},{key:"getUrlWithTarget",value:function(e){return(this.isRealURL()?this.getCleanURL():"/")+e}},{key:"getUrlForApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e+"/?action=api":"/?action=api"}}],[{key:"hrefToLocation",value:function(e){var t=document.createElement("a");return t.href=e,t}}])}();function u(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}const p=function(){function t(n){e(this,t),this._data=new Object(n)}return i(t,[{key:"getData",value:function(){return this._data}},{key:"getValues",value:function(){return _.map(this._data,function(e,t){return e})}},{key:"has",value:function(e){return this._data.hasOwnProperty(e)}},{key:"get",value:function(e){return this.has(e)?this._data[e]:""}},{key:"set",value:function(e,t){this._data[e]=t}},{key:"getObject",value:function(e){return new t(this.has(e)?this.get(e):{})}}])}();function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}var f=function(t){function n(){return e(this,n),t=this,i=arguments,a=h(a=n),u(t,g()?Reflect.construct(a,i||[],h(t).constructor):a.apply(t,i));var t,a,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(n,t),i(n,[{key:"getUid",value:function(){return this.get("uid")}},{key:"getPageUid",value:function(){var e=this.get("pageUid"),t=this.get("uid");return e||t}},{key:"getLabel",value:function(){return this.get("label")}},{key:"getDescription",value:function(){return this.get("description")}},{key:"getAbstract",value:function(){return this.get("abstract")}},{key:"getThumbnail",value:function(){return this.get("thumbnail")}},{key:"getBackgroundSize",value:function(){return this.get("bgSize")}}])}(function(){return i(function t(n){e(this,t),this._data=new p(n)},[{key:"toString",value:function(){return JSON.stringify(this.getData())}},{key:"toJSON",value:function(){return this.getData()}},{key:"getData",value:function(){return this._data.getData()}},{key:"get",value:function(e){return arguments.length>1&&!this.has(e)?arguments.length[1]:this._data.get(e)}},{key:"has",value:function(e){return this._data.has(e)}},{key:"set",value:function(e,t){this._data.set(e,t)}},{key:"ok",value:function(){return!0===this.get("result")}},{key:"bad",value:function(){return!this.ok()}}])}());const v=new c(location.protocol,location.host,location.pathname,location.search);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var E=["all","page","blog","help","document","product","partner"],S="all",k=function(){return i(function t(n){var a;e(this,t),this.element=document.querySelector(n),this.suggestionClicked=!1,this.searchElement=this.element.querySelector("[data-search-wrapper]"),this.input=this.searchElement.querySelector("[data-search-input]"),this.close=this.element.querySelector("[data-search-close]"),this.clear=this.element.querySelector("[data-search-clear]"),this.reset=this.element.querySelector("[data-search-reset]"),this.typeFilters=this.element.querySelectorAll("[data-search-type-filter]"),this.filterCount=this.element.querySelector("[data-search-filter-count]"),this.language=(null===(a=this.element.querySelector("[data-search-lang]:checked"))||void 0===a||null===(a=a.dataset)||void 0===a?void 0:a.uid)||0,this.initialLang=this.language,this.resultsContainer=this.element.querySelector("[data-search-container]"),this.loadingContainer=this.element.querySelector("[data-search-loading]"),this.emptyContainer=this.element.querySelector("[data-search-empty]"),this.loading=!1,this.active=!1,this.highlightsActive=!1,this.lastSearch=null,this.nopics=null,this.searchTimer=null,this.closeTimer=null,this.lastcontainer=null,this.hideEmptyContainer(),this.hideLoader(),this.clearFilter(),this.attachEvents(),this.attachLanguageSelector(),this.attachFilterSelector(),this.attachSearchQuery()},[{key:"attachSearchQuery",value:function(){var e=new c(location.protocol,location.host,location.pathname,location.search);if("undefined"!=e.getParam("q")&&null!=e.getParam("q")){var t=""!=e.getParam("q")?decodeURIComponent(e.getParam("q")):"",n=""!=e.getParam("t")?decodeURIComponent(e.getParam("t")):"all";Debugger.output("Main.js","attachSearchQuery",t),$("#"+this.element.id).modal("show"),Events.fire(s.SEARCH_OVERLAY_SHOW,{query:t,searchTypes:n})}}},{key:"attachLanguageSelector",value:function(){var e=this;this.element.querySelectorAll("[data-search-lang]").forEach(function(t){t.addEventListener("change",function(n){if(n.preventDefault(),n.stopPropagation(),t.checked){var a=t.dataset.uid;AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"switched.to",name:a,value:1}),e.language=a,e.processSearch()}})})}},{key:"attachFilterSelector",value:function(){var e,t,n=this;this.element.querySelector("[data-dropdown-filter]")&&(null===(e=this.element.querySelector(".dropdown-menu"))||void 0===e||e.addEventListener("click",function(e){e.stopPropagation()}),null===(t=this.element.querySelector("[data-dropdown-filter-save]"))||void 0===t||t.addEventListener("click",function(e){$('[data-search-wrapper] [data-toggle="dropdown"]').dropdown("toggle")}),this.typeFilters.forEach(function(e){e.addEventListener("change",function(t){if(e.checked)e.value===S?n.typeFilters.forEach(function(e){e.checked=!1}):(n.typeFilters.forEach(function(e){e.value===S&&(e.checked=!1)}),n.element.querySelectorAll('[data-search-type][value="all"]').checked=!1),e.checked=!0;else{var a=!0;n.typeFilters.forEach(function(e){e.checked&&(a=!1)}),a&&(n.element.querySelector('[data-search-type-filter][value="all"]').checked=!0)}var i=[];n.typeFilters.forEach(function(e){e.checked&&E.includes(e.value)&&i.push(e.value)}),n.searchtypes=i,AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"filter.type",name:n.searchtypes.join(","),value:1}),n.updateFilterCount(),n.processSearch()})}))}},{key:"attachEvents",value:function(){var e=this;this.input.addEventListener("focus",function(t){e.onFocus(t)}),this.input.addEventListener("keydown",function(t){e.onKeyDown(t)}),this.input.addEventListener("keyup",function(t){e.onKeyUp(t)}),this.close.addEventListener("click",function(t){e.closeOverlay(),e.clearQueryParam()}),this.reset.addEventListener("click",function(t){e.clearInput(),e.clearResults(),e.clearFilter(),e.clearQueryParam(),e.startHighlights()}),this.clear.addEventListener("click",function(t){e.clearInput(),e.clearResults(),e.clearQueryParam(),e.startHighlights()}),this.filterCount.addEventListener("change",function(t){var n;e.element.querySelector('[data-dropdown-wrapper] [data-toggle="dropdown"]')&&((null===(n=e.filterCount)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.value)>=1?e.element.querySelector("[data-dropdown-wrapper]").classList.add("-filtersActive"):e.element.querySelector("[data-dropdown-wrapper]").classList.remove("-filtersActive"))}),Events.register(s.SEARCH_OVERLAY_SHOW,function(t){if(t.searchTypes){var n=t.searchTypes,a=[];n.split(",").forEach(function(e){E.includes(e)&&a.push(e)}),a!==e.searchtypes&&(e.clearResults(),e.clearInput(),e.searchtypes=a),0===e.searchtypes.length&&(e.searchtypes=[S]),e.typeFilters.forEach(function(t){return t.checked=e.searchtypes.includes(t.value)}),e.updateFilterCount()}if(t.query){var i=t.query;""!==i&&(e.input.value=i,Debugger.output("SearchOverlay","query",i))}else{var s=new c(location.protocol,location.host,location.pathname,location.search);"undefined"!=s.getParam("q")&&null!=s.getParam("q")&&s.getParam("q").length&&(e.input.value=s.getParam("q"),"undefined"!=s.getParam("t")&&null!=s.getParam("t")&&s.getParam("t").length&&(e.input.searchtypes=s.getParam("t")))}return e.processSearch(),!0}),document.querySelectorAll("[data-search-type]").forEach(function(t,n){t.addEventListener("click",function(n){var a=t.dataset.searchType;a&&(e.searchtypes=a.split(","),e.typeFilters.forEach(function(t){return t.checked=e.searchtypes.includes(t.value)}),e.updateFilterCount()),e.processSearch(),e.input.focus()})}),$("#"+this.element.id).on("shown.bs.modal",function(t){e.input.focus()})}},{key:"processSearch",value:function(){this.hideLoader(),this.clearResults(),this.hideEmptyContainer(),this.getCleanedSearch().length>1?(this.stopHighlights(),this.startSearching()):(this.clearQueryParam(),1===this.searchtypes.length&&this.searchtypes.includes(S)&&(this.stopSearching(),this.startHighlights())),this.input.focus()}},{key:"updateFilterCount",value:function(){var e=0;this.typeFilters.forEach(function(t){t.checked&&t.value!==S&&e++}),this.filterCount.dataset.value=e,this.filterCount.innerHTML=e>0?e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):"",this.filterCount.dispatchEvent(new Event("change"))}},{key:"closeOverlay",value:function(){window.clearTimeout(this.searchTimer),window.clearTimeout(this.closeTimer),$("#"+this.element.id).modal("hide"),this.clearInput(),this.clearResults(),this.clearFilter()}},{key:"onFocus",value:function(e){window.clearTimeout(this.closeTimer),this.enableSearch()}},{key:"onKeyDown",value:function(e){var t=e.keyCode||e.which;this.active&&27===t&&(this.stopSearching(),this.disableSearch(),this.closeOverlay())}},{key:"onKeyUp",value:function(e){var t=this.getCleanedSearch();this.lastSearch!==t&&this.processSearch()}},{key:"stopHighlights",value:function(){this.highlightsActive=!1,this.request&&this.request.abort(),this.loading=!1,window.clearTimeout(this.searchTimer)}},{key:"startHighlights",value:function(){var e=this;this.stopHighlights(),this.highlightsActive=!0,this.active=!0,this.element.classList.add("active"),this.hideEmptyContainer(),this.showLoader(),this.searchTimer=window.setTimeout(function(){e.highlights()},150)}},{key:"highlights",value:function(){var e=this;this.loading=!0,this.showLoader();var t={apiKey:"searchHighlights",L:this.language};this.request=$.get(v.getUrlForApi(this.language),t,function(e){}).always(function(t){if(!1!==e.loading&&!1!==e.active){e.loading=!1;var n={};(n=t.responseJSON?t.responseJSON:t).result&&e.buildResult(n.data)}})}},{key:"query",value:function(e){var t=this,n=String(this.getCleanedSearch()).toLowerCase();this.loading=!0,this.lastSearch=this.getCleanedSearch();var a=new c(location.protocol,location.host,location.pathname,"");n.length>1?(a.addParam("q",n),this.showClear()):this.hideClear(),this.searchtypes.includes(S)||a.addParam("t",this.searchtypes.join(",")),e&&history.pushState({},null,a.getFullURL(!1));var i={action:"api",apiKey:"search",q:n,L:this.language};this.searchtypes.length&&!this.searchtypes.includes(S)?i.t=this.searchtypes.join(","):i.t=E.filter(function(e){return e!==S}).join(","),this.request=$.get(v.getUrlForApi(this.language),i,function(e){}).always(function(e){if(!1!==t.loading&&!1!==t.active){t.loading=!1;var n={};(n=e.responseJSON?e.responseJSON:e).result&&t.buildResult(n.data)}})}},{key:"buildResult",value:function(e){this.results=0,this.total=e.count,this.totalSuggestions=e.countSuggestions,this.clearResults(),AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"searched-for",name:this.getCleanedSearch(),value:this.total>0?1:0}),this.hideLoader(),0===this.total?(this.showEmptyContainer(),this.totalSuggestions>0&&this.handleRecords(e)):(this.hideEmptyContainer(),this.handleRecords(e)),this.input.focus()}},{key:"handleRecords",value:function(e){var t,n=e.labels,a=e.categories,i=e.highlightsCategories,s=e.records,r=this.highlightsActive?[]:e.suggestions;this.nopics=null!==(t=e.nopics)&&void 0!==t?t:null,this.highlightContainer=l("div",{class:"row row-xs align-items-stretch-immediate"}),this.recordsContainer=l("div",{class:"row"}),this.suggestionRow=l("div",{class:"row row-xs"}),this.suggestionCol=l("div",{class:"col-12"}),this.suggestionContainer=l("ul",{class:"sds-searchModal__tags sds-btnGroup -hasVerticalSpacing"}),this.suggestionRow.append(this.suggestionCol),this.suggestionCol.append(this.suggestionContainer),this.articlesContainer=l("div",{class:"sds-searchModal__resultArea"}),this.articlesContainer.append(this.highlightContainer,this.recordsContainer),this.resultsContainer.append(this.articlesContainer),r.length&&this.resultsContainer.prepend(this.suggestionRow),this.suggestionClicked||this.renderSuggestionList(r),this.suggestionClicked=!1;var o=s.slice(0,3);if(o.length){var c=i.headline;if(this.highlightsActive){var u=l("h3",{class:"h3 sds-searchModal__textColor"},c),h=l("div",{class:"col-12"});h.append(u),this.highlightContainer.append(h)}this.renderHighlights(o,a,n)}var d=s.slice(3);if(d.length){var p=i.most_searched;if(p){var g=l("h3",{class:"h3 sds-searchModal__textColor"},p);this.recordsStackContainer=l("div",{class:"col-12 sds-stackMd"},[g]),this.recordsContainer.append(this.recordsStackContainer)}this.renderRecords(d,a,n)}}},{key:"renderHighlights",value:function(e,t,n){var a,i=y(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.highlightContainer.append(l("div",{class:"col-lg-4"},[this.renderCard("card",s.source,{type:s.type,subtitle:t[s.type],nopic:!0,link:n.more,max:120,maxWithTitle:!0})])),this.results++}}catch(e){i.e(e)}finally{i.f()}}},{key:"renderSuggestionList",value:function(e){var t=this;if(e.length){this.suggestionContainer.innerHTML="";var n,a=y(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=l("button",{class:"sds-btn -btnCta -btnCtaSecondary -btnSmall js-search-suggestion","data-text":i}),r=l("span",{class:"sds-btn__text"},i);s.append(r),this.suggestionContainer.append(l("li",{},s))}}catch(e){a.e(e)}finally{a.f()}this.suggestionContainer.querySelectorAll(".js-search-suggestion").forEach(function(e){e.addEventListener("click",function(n){var a,i,s=null!==(a=null===(i=e.dataset)||void 0===i?void 0:i.text)&&void 0!==a?a:"";AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"clicked-on",name:"query.completion : "+s,value:1}),t.suggestionClicked=!0,t.input.value=s,t.onKeyUp(n)})})}}},{key:"renderRecords",value:function(e,t,n){var a,i=new l("div",{class:"sds-box -boxInsetMd"}),s=new l("ul",{class:"list-unstyled sds-staticStackSm sds-outOfBounds"}),o=y(e);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=new l("li",{}),h={};c.type===r.DOCUMENT&&(h.link=n.download),this.highlightsActive&&(h.classType="document"===c.type||"service_point"===c.type?c.type:"page"),u.append(this.renderItem("card",c.source,{type:c.type,subtitle:t[c.type],nopic:!0,link:n.more,max:120,maxWithTitle:!0})),this.results++,s.append(u)}}catch(e){o.e(e)}finally{o.f()}i.append(s),this.recordsStackContainer.append(i)}},{key:"prepareRecord",value:function(e,t,n,a){var i={};if(i.title=a.getLabel(),i.uid=a.getUid(),a.has("subtitle")?i.subtitle=a.get("subtitle"):n.subtitle&&(i.subtitle=n.subtitle),a.has("description")?i.description=a.getDescription():a.has("abstract")&&(i.description=a.getAbstract()),i.description)i.description=this.limitContent(i.title,i.description,n);else if(a.has("services")){var s=a.get("services").join(", ");s=this.limitContent(i.title,s,n),i.description=s}if(i.actionIcon="sds-icon-arrownext",i.linkTarget="_self","document"===n.type&&(i.actionIcon="sds-icon-download",i.linkTarget="_blank"),i.actionLabel=n.link?n.link:"",a.has("link")){var r=a.get("link"),o=r.params?r.params:{};i.linkPath=this.redirectToUid(r.uid,o)}else if(a.has("path"))i.linkPath=a.get("path");else{var l={L:this.language};i.linkPath=this.redirectToUid(a.getPageUid(),l)}return i}},{key:"renderItem",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new f(t),s=this.prepareRecord(e,t,a,i),r=new l("a",{class:"sds-listItem -insetMd position-relative sds-hoverContentSecondary justify-content-between "+(a.classType?a.classType:e),href:s.linkPath,target:s.linkTarget,"data-title":s.title,"data-uid":s.uid}),c=new l("h4",{class:"h4"},s.title);"document"===a.type&&(c=new l("h4",{class:"h4"},[new l("span",{class:"sds-staticInlineXxs"},[new l("span",{class:"h4"},[s.title+" "]),new l("span",{class:"align-text-top sds-iconSizeInherit sds-textBody sds-icon sds-icon-document"},[])])]));var u=new l("span",{class:"sds-iconBtn -iconBtnBase -iconBtnSecondary stretched-link d-none d-md-inline-flex"});return u.append(l("span",{class:"sds-iconBtn -iconBtnBase -iconBtnSecondary stretched-link"},[l("span",{class:"sds-icon "+s.actionIcon}),l("div",{class:"sr-only"},s.actionLabel)])),r.append(c,u),r.addEventListener("click",function(){AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"clicked-on",name:e+"."+i.getPageUid()+(n.highlightsActive?".top10":".results"),value:0})}),r}},{key:"renderCard",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new f(t),s=this.prepareRecord(e,t,a,i),r=l("div",{class:"sds-pictureLinkBox__body"}),c=l("div",{class:"sds-pictureLinkBox__text sds-stackMd"}),u=l("div",{class:"sds-pictureLinkBox__action"});if(r.append(c,u),s.subtitle){var h=null;h="document"===a.type?l("span",{class:"sds-staticInlineXs sds-metaColor sds-textHelper d-flex align-items-baseline"},[new l("span",{class:"sds-icon sds-icon-document sds-iconSizeInherit"},[]),new l("span",{},[" "+s.subtitle])]):l("span",{class:"sds-staticInlineXs sds-metaColor sds-textHelper d-flex align-items-baseline"},[new l("span",{},s.subtitle)]),c.append(h)}s.title&&c.append(l("h3",{class:"sds-pictureLinkBox__title"},s.title)),s.description&&c.append(l("p",{class:"sds-pictureLinkBox__description"},s.description)),u.append(l("span",{class:"sds-iconBtn -iconBtnBase -iconBtnSecondary stretched-link"},[l("span",{class:"sds-icon "+s.actionIcon}),l("div",{class:"sr-only"},s.actionLabel)]));var d=new l("a",{class:"sds-pictureLinkBox sds-box -isVertical -searchItem sds-shadowInteraction"+(a.classType?a.classType:e),href:s.linkPath,target:s.linkTarget,"data-title":s.title,"data-uid":s.uid});"product"===a.type&&d.classList.add("-product");var p=null;if(i.getThumbnail()||this.nopics[a.type]){var g,v=i.getThumbnail();if(v.length)(p=new l("div",{class:"sds-pictureLinkBox__img"})).append(l("img",{class:"img-fluid",src:v}));else v=null!==(g=this.nopics[a.type])&&void 0!==g?g:null,(p=new l("div",{class:"sds-pictureLinkBox__img"})).innerHTML=v}return d.append(p,r),d.addEventListener("click",function(){AnalyticsGateway.processServiceEvent(o.PIWIK_PRO,{category:"search",action:"clicked-on",name:e+"."+i.getPageUid()+(n.highlightsActive?".top10":".results"),value:0})}),d}},{key:"redirectToUid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=new c(location.protocol,location.host,location.pathname,location.search);a.removeParam("q");for(var i=0,s=Object.keys(t);i<s.length;i++){var r=s[i],o=t[r];a.addParam(r,o)}a.addParam("apiKey","redirect"),a.addParam("page",e);var l=v.getUrlForApi();return l+=a.getParamString(!0),n&&(l+="#"+n),l}},{key:"getCleanedSearch",value:function(){return this.input.value.trim().toLowerCase()}},{key:"limitContent",value:function(e,t,n){var a=n.max||50,i=t.length,s=0;if(n.maxWithTitle){var r=a-(e.length+t.length);s=t.length+r}else s=a<i?a:i;return t=t.substr(0,Math.max(0,s)),s<i&&(t+="..."),t}},{key:"stopSearching",value:function(){this.request&&this.request.abort(),this.loading=!1,window.clearTimeout(this.searchTimer)}},{key:"startSearching",value:function(){var e=this;this.stopSearching(),this.active=!0,this.element.classList.add("active"),this.hideEmptyContainer(),this.showLoader(),this.clearResults(),this.searchTimer=window.setTimeout(function(){e.query(!0)},150)}},{key:"enableSearch",value:function(){this.active=!0}},{key:"disableSearch",value:function(){this.input.value="",this.input.blur(),this.active=!1}},{key:"showLoader",value:function(){this.loadingContainer.classList.remove("d-none")}},{key:"hideLoader",value:function(){this.loadingContainer.classList.add("d-none")}},{key:"showClear",value:function(){this.clear.classList.remove("d-none")}},{key:"hideClear",value:function(){this.clear.classList.add("d-none")}},{key:"showEmptyContainer",value:function(){this.emptyContainer.classList.remove("d-none")}},{key:"hideEmptyContainer",value:function(){this.emptyContainer.classList.add("d-none")}},{key:"clearQueryParam",value:function(){var e=new c(location.protocol,location.host,location.pathname,location.search);e.removeParam("q"),e.removeParam("t"),history.pushState({},null,e.getFullURL(!1))}},{key:"clearResults",value:function(){this.resultsContainer.innerHTML="",this.lastcontainer=null}},{key:"clearInput",value:function(){this.input.value="",this.lastSearch="",this.hideClear(),this.input.focus()}},{key:"clearFilter",value:function(){var e=this.element.querySelector('[data-search-lang][data-uid="'+this.initialLang+'"]');e.checked=!0,e.dispatchEvent(new Event("change")),this.searchtypes=[S],this.typeFilters.forEach(function(e){e.checked=e.value===S}),this.updateFilterCount()}}])}();Events.register(s.WINDOW_LOADED,function(){return new k("#searchModal"),!0})})();